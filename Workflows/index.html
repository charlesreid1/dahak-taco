



<!DOCTYPE html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
      
        <link rel="canonical" href="https://dahak-metagenomics.github.io/dahak-taco/Workflows/">
      
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../">
      <meta name="generator" content="mkdocs-0.17.3, mkdocs-material-2.7.2">
    
    
      
        <title>Workflows - dahak-taco</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/application.8d40d89b.css">
      
        <link rel="stylesheet" href="../assets/stylesheets/application-palette.6079476c.css">
      
    
    
      <script src="../assets/javascripts/modernizr.1aa3b519.js"></script>
    
    
      <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
      
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
      <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    
    
      <link rel="stylesheet" href="../css/custom.css">
    
    
  </head>
  
    
    
    <body dir="ltr" data-md-color-primary="orange" data-md-color-accent="orange">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448"
    viewBox="0 0 416 448" id="github">
  <path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19-18.125
        8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19 18.125-8.5
        18.125 8.5 10.75 19 3.125 20.5zM320 304q0 10-3.125 20.5t-10.75
        19-18.125 8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19
        18.125-8.5 18.125 8.5 10.75 19 3.125 20.5zM360
        304q0-30-17.25-51t-46.75-21q-10.25 0-48.75 5.25-17.75 2.75-39.25
        2.75t-39.25-2.75q-38-5.25-48.75-5.25-29.5 0-46.75 21t-17.25 51q0 22 8
        38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0
        37.25-1.75t35-7.375 30.5-15 20.25-25.75 8-38.375zM416 260q0 51.75-15.25
        82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5-41.75
        1.125q-19.5 0-35.5-0.75t-36.875-3.125-38.125-7.5-34.25-12.875-30.25-20.25-21.5-28.75q-15.5-30.75-15.5-82.75
        0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25
        30.875q36.75-8.75 77.25-8.75 37 0 70 8 26.25-20.5
        46.75-30.25t47.25-9.75q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34
        99.5z" />
</svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="drawer"></label>
    
      <a href="#workflows" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="https://dahak-metagenomics.github.io/dahak-taco" title="dahak-taco" class="md-header-nav__button md-logo">
          
            <i class="md-icon">group_work</i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            
              <span class="md-header-nav__topic">
                dahak-taco
              </span>
              <span class="md-header-nav__topic">
                Workflows
              </span>
            
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          
            <label class="md-icon md-icon--search md-header-nav__button" for="search"></label>
            
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
          
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  


  <a href="https://github.com/dahak-metagenomics/dahak-taco" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      dahak-taco
    </div>
  </a>

          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="drawer">
    <span class="md-nav__button md-logo">
      
        <i class="md-icon">group_work</i>
      
    </span>
    dahak-taco
  </label>
  
    <div class="md-nav__source">
      


  


  <a href="https://github.com/dahak-metagenomics/dahak-taco" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      dahak-taco
    </div>
  </a>

    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href=".." title="Index" class="md-nav__link">
      Index
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../Installation/" title="Installation" class="md-nav__link">
      Installation
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../Usage/" title="Usage" class="md-nav__link">
      Usage
    </a>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="toc">
        Workflows
      </label>
    
    <a href="./" title="Workflows" class="md-nav__link md-nav__link--active">
      Workflows
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#workflow-repositories" title="Workflow Repositories" class="md-nav__link">
    Workflow Repositories
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#running-a-workflow" title="Running a Workflow" class="md-nav__link">
    Running a Workflow
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#workflow-components" title="Workflow Components" class="md-nav__link">
    Workflow Components
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#rules" title="Rules" class="md-nav__link">
    Rules
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#workflow-configuration-file" title="Workflow Configuration File" class="md-nav__link">
    Workflow Configuration File
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#example-rule-based-workflow-configuration-file" title="Example Rule-Based Workflow Configuration File" class="md-nav__link">
    Example Rule-Based Workflow Configuration File
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example-file-based-workflow-configuration-file" title="Example File-Based Workflow Configuration File" class="md-nav__link">
    Example File-Based Workflow Configuration File
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#workflow-parameters-file" title="Workflow Parameters File" class="md-nav__link">
    Workflow Parameters File
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#example-workflow-parameters-file" title="Example Workflow Parameters File" class="md-nav__link">
    Example Workflow Parameters File
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#docker-and-singularity" title="Docker and Singularity" class="md-nav__link">
    Docker and Singularity
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#docker-images" title="Docker Images" class="md-nav__link">
    Docker Images
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#singularity" title="Singularity" class="md-nav__link">
    Singularity
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../Quickstart/" title="Quick Start" class="md-nav__link">
      Quick Start
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../AWSSetup/" title="AWS Setup for Walkthroughs" class="md-nav__link">
      AWS Setup for Walkthroughs
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../SnakemakeRules/" title="Snakemake Rules" class="md-nav__link">
      Snakemake Rules
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../DevWorkflows/" title="Developing Workflows" class="md-nav__link">
      Developing Workflows
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../Documentation/" title="Documentation" class="md-nav__link">
      Documentation
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../Development/" title="Snakemake Development" class="md-nav__link">
      Snakemake Development
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#workflow-repositories" title="Workflow Repositories" class="md-nav__link">
    Workflow Repositories
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#running-a-workflow" title="Running a Workflow" class="md-nav__link">
    Running a Workflow
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#workflow-components" title="Workflow Components" class="md-nav__link">
    Workflow Components
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#rules" title="Rules" class="md-nav__link">
    Rules
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#workflow-configuration-file" title="Workflow Configuration File" class="md-nav__link">
    Workflow Configuration File
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#example-rule-based-workflow-configuration-file" title="Example Rule-Based Workflow Configuration File" class="md-nav__link">
    Example Rule-Based Workflow Configuration File
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example-file-based-workflow-configuration-file" title="Example File-Based Workflow Configuration File" class="md-nav__link">
    Example File-Based Workflow Configuration File
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#workflow-parameters-file" title="Workflow Parameters File" class="md-nav__link">
    Workflow Parameters File
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#example-workflow-parameters-file" title="Example Workflow Parameters File" class="md-nav__link">
    Example Workflow Parameters File
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#docker-and-singularity" title="Docker and Singularity" class="md-nav__link">
    Docker and Singularity
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#docker-images" title="Docker Images" class="md-nav__link">
    Docker Images
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#singularity" title="Singularity" class="md-nav__link">
    Singularity
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                <h1 id="workflows">Workflows<a class="headerlink" href="#workflows" title="Permanent link">&para;</a></h1>
<h2 id="workflow-repositories">Workflow Repositories<a class="headerlink" href="#workflow-repositories" title="Permanent link">&para;</a></h2>
<p>To create a new workflow or set of workflows, 
create a new repository to hold all the files 
for the workflow.</p>
<p>You will need a <code>rules/</code> folder, as well as a folder for
configuration files and parameter files.</p>
<p>The taco tool is then run from that directory, and runs
the workflows defined in that directory.</p>
<p>Here is an example repository layout for 
a repository containing two related workflows:</p>
<div class="codehilite"><pre><span></span>taco-my-awesome-workflow/

        rules/
            workflowA/
                Snakefile
                purple.rule
                blue.rule
                green.rule
                workflowA.settings

            workflowB/
                Snakefile
                apple.rule
                orange.rule
                banana.rule
                workflowB.settings

        workflow-config/
            config_make_apples.json
            config_make_blue_apples.json
            config_make_bananas.json
            config_make_green_bananas.json

        workflow-params/
            params_lite.json
            params_medium.json
            params_heavy.json

        docker/
            utility_one/
                Dockerfile
            utility_two/
                Dockerfile
            utility_three/
                Dockerfile
</pre></div>


<p>Each of these components is discussed in more detail below,
but first we cover how to get up and running with an existing
workflow.</p>
<h2 id="running-a-workflow">Running a Workflow<a class="headerlink" href="#running-a-workflow" title="Permanent link">&para;</a></h2>
<p>When you run <code>taco</code> you can specify several verbs.
The <code>ls</code> verb will list available workflows, which it 
does by looking for folders in the <code>rules/</code> directory
(relative to the current directory where <code>taco</code> was run)
that contain Snakemake workflows:</p>
<div class="codehilite"><pre><span></span>taco ls
</pre></div>


<p>To list rules in a particular workflow, give the name of the 
workflow to the <code>ls</code> verb:</p>
<div class="codehilite"><pre><span></span>taco ls &lt;workflow-name&gt;
</pre></div>


<p>To run the workfow, use the workflow name as the verb:</p>
<div class="codehilite"><pre><span></span>taco &lt;workflow-name&gt; [OPTIONS]
</pre></div>


<p>When this command is executed, <code>taco</code> loads the 
<code>Snakefile</code> (and subsequently all workflow rules)
in the <code>rules/&lt;workflow-name&gt;/</code> directory.
The Snakefile will first load the user-provided
workflow parameters, then fill in any parmeters
the user did not provide with the default values.</p>
<p><code>taco</code> then uses the configuration file provided in 
the options to determine what targets to make,
and from that determines what rules to run.</p>
<h2 id="workflow-components">Workflow Components<a class="headerlink" href="#workflow-components" title="Permanent link">&para;</a></h2>
<p>All workflow repositories must include:</p>
<ul>
<li>Rules</li>
<li>Workflow configuration files</li>
<li>Workflow parameter files</li>
<li>Documentation</li>
</ul>
<p>The rules are required to define the workflow,
and the configuration and parameter files are 
required to guide the user on how to use the 
workflow.</p>
<p>Optionally, if your workflow requires it you can
also include:</p>
<ul>
<li>Docker images</li>
</ul>
<h3 id="rules">Rules<a class="headerlink" href="#rules" title="Permanent link">&para;</a></h3>
<p>Workflows are defined in a folder called <code>rules/</code>.</p>
<p>The <code>rules/</code> directory contains one folder per workflow.
Each workflow is defined by <code>rules/&lt;workflow-name&gt;/Snakefile</code>,
and workflows should include the following:</p>
<ul>
<li><code>Snakefile</code> - this will consist mainly of <code>include:</code> statements</li>
<li><code>*.rule</code> files - these define the Snakemake rules</li>
<li><code>*.settings</code> files - usually one per workflow, these define default values 
    for all workflow parameters (and also serve as documentation for workflow
    parameter values)</li>
</ul>
<p>The user should specify the workflow name as the first
verb on the command line, then pass any flags that modify
the workflow behavior. For example:</p>
<div class="codehilite"><pre><span></span>$ taco read_filtering (--config-json|--config-yaml) (--params-json|--params-yaml)
</pre></div>


<p>(More on the config and params flags below.)</p>
<p>This command will run the Snakemake API with the Snakefile found in <code>rules/read_filtering</code> 
(relative to the current directory where <code>taco</code> was run). It uses the target specified by 
the user's workflow configuration file to figure out what rules to run, and runs them using
the parameters in the user's parameters file.</p>
<h3 id="workflow-configuration-file">Workflow Configuration File<a class="headerlink" href="#workflow-configuration-file" title="Permanent link">&para;</a></h3>
<p>The workflow configuration file 
contains a dictionary of configuration values.</p>
<p>The workflow configuration file
must specify a list of workflow targets
assigned to the key <code>workflow_targets</code>.</p>
<p>The value must be a valid Snakemake rule
defined in one of the rule files at <code>rules/&lt;workflow-name&gt;/*.rules</code>.</p>
<p>The form of the workflow configuration file 
for running rules that have no file targets is
to specify the name of the rule:</p>
<p><strong>JSON:</strong></p>
<div class="codehilite"><pre><span></span>{
    &quot;workflow_targets&quot; : &lt;list of Snakemake rules&gt;
}


{
    &quot;workflow_targets&quot; : &lt;list of output file targets&gt;
}
</pre></div>


<p><strong>YAML:</strong></p>
<div class="codehilite"><pre><span></span>workflow_targets:
  - list
  - of 
  - target
  - files

-----------

workflow_targets:
  - list
  - of
  - target
  - rules
</pre></div>


<h4 id="example-rule-based-workflow-configuration-file">Example Rule-Based Workflow Configuration File<a class="headerlink" href="#example-rule-based-workflow-configuration-file" title="Permanent link">&para;</a></h4>
<p>Here is a simple example of a workflow configuration file
for running a rule that has no file targets (pulling containers).
This rule specifies the workflow target by specifying the 
rule name:</p>
<p><strong>JSON:</strong></p>
<div class="codehilite"><pre><span></span>{
    &quot;workflow_targets&quot; : [&quot;pull_biocontainers&quot;]
}
</pre></div>


<p><strong>YAML:</strong></p>
<div class="codehilite"><pre><span></span>workflow_targets:
  - pull_biocontainers
</pre></div>


<h4 id="example-file-based-workflow-configuration-file">Example File-Based Workflow Configuration File<a class="headerlink" href="#example-file-based-workflow-configuration-file" title="Permanent link">&para;</a></h4>
<p>Here is a simple example of a workflow configuration file
that runs rules based on filename targets (in this example,
the output of a trimming process):</p>
<p><strong>JSON:</strong></p>
<div class="codehilite"><pre><span></span>{
    &quot;workflow_targets&quot; : [&quot;XXXXXX_trim5_1.fq.gz&quot;,
                          &quot;XXXXXX_trim5_2.fq.gz&quot;]
}
</pre></div>


<p><strong>YAML:</strong></p>
<div class="codehilite"><pre><span></span>workflow_targets: 
  - XXXXXX_trim5_1.fq.gz
  - XXXXXX_trim5_2.fq.gz
</pre></div>


<h3 id="workflow-parameters-file">Workflow Parameters File<a class="headerlink" href="#workflow-parameters-file" title="Permanent link">&para;</a></h3>
<p>The workflow parameters control various parameters
that are used by the programs and containers run
by the Snakemake rules.</p>
<p>Each workflow defines a set of default parameter values
in a <code>.settings</code> file that lives next to the <code>Snakefile</code>
and <code>*.rule</code> files.</p>
<p>However, the user can set these parameter values in the 
workflow parameters file, and these values set by the user 
will override the default values.</p>
<p>The workflow parameters control how the workflow proceeds.</p>
<p>The workflow configuration controls the starting and ending points.</p>
<p>The form of the workflow parameters JSON file is:</p>
<p><strong>JSON:</strong></p>
<div class="codehilite"><pre><span></span>{
    &#39;&lt;workflow-name&gt;&#39; : {
        &#39;&lt;rule-name&gt;&#39; : {
            &#39;&lt;param-name&gt;&#39; : &lt;param-value&gt;,
            &#39;&lt;param-list&gt;&#39; : [&lt;value1&gt;, ...],
            ...
        }
    }
}
</pre></div>


<p><strong>YAML:</strong></p>
<div class="codehilite"><pre><span></span>my_workflow_name:

  my_rule_name_1:
    my_param_name_1: &quot;my_param_value&quot;
    my_param_name_2: 10

  my_rule_name_2:
    my_param_name_3: &quot;another_param_value&quot;
    my_param_name_4: 100
</pre></div>


<p>Most parameters are listed under the name of the application
that uses it, but some parameters have more generic names because
they are common to multiple tasks.</p>
<h4 id="example-workflow-parameters-file">Example Workflow Parameters File<a class="headerlink" href="#example-workflow-parameters-file" title="Permanent link">&para;</a></h4>
<p>The following example parameters file adjusts the parameters for 
the rule to update biocontainers.</p>
<p>This is a simple parameter file overriding a single parameter,
the version of sourmash being utilized.</p>
<p>This overrides the default biocontainers setting of 
sourmash version <code>2.0.0a3--py36_0</code>, set in 
<code>rules/dahak/biocontainers.settings</code>.</p>
<p><strong>JSON:</strong></p>
<div class="codehilite"><pre><span></span>{
    &quot;biocontainers&quot; : {
        &quot;trimmomatic&quot; : {
            &quot;use_local&quot; : false,
            &quot;quayurl&quot; : &quot;quay.io/biocontainers/trimmomatic&quot;,
            &quot;version&quot; : &quot;0.36--5&quot;
        }
    }
}
</pre></div>


<p><strong>YAML:</strong></p>
<div class="codehilite"><pre><span></span>biocontainers:
  trimmomatic:
    quayurl: &quot;quay.io/biocontainers/trimmomatic&quot;
    version: &#39;0.36--5&quot;
    use_local: false
</pre></div>


<h2 id="docker-and-singularity">Docker and Singularity<a class="headerlink" href="#docker-and-singularity" title="Permanent link">&para;</a></h2>
<h3 id="docker-images">Docker Images<a class="headerlink" href="#docker-images" title="Permanent link">&para;</a></h3>
<p>Most taco workflows utilize singularity to run docker containers
as part of the workflows. Docker containers are usually specified
by URL, but if a biocontainer or Dockerhub image is broken, a local
image must be used. </p>
<p>For this reason, some workflows will include their own
Dockerfiles. This is not recommended, but serves as a temporary fix.</p>
<p>To use a custom docker image in a taco workflow,
add a <code>docker</code> directory, and add a subdirectory
for the utility you are adding. For example, if
we are adding a simple alpine widget called <code>acme_widget</code>,
we would create <code>docker/acme_widget/</code> and add the 
Dockerfile to <code>docker/acme_widget/Dockerfile</code>.</p>
<p>We must also set up the configuration files and 
parameters to utilize local docker images.
This is largely workflow dependent, but 
a good pattern to implement this is to include
a configuration dictionary for each application
(such as <code>acme_widget</code>) that specifies whether 
to use a dockerhub/quay.io contianer image 
or a local container image:</p>
<div class="codehilite"><pre><span></span>acme_widget:
  use_local: true
  local: my_acme_widget_image
</pre></div>


<p>This assumes you ran </p>
<div class="codehilite"><pre><span></span>docker build -t my_acme_widget_image .
</pre></div>


<p>in the <code>docker/acme_widget/Dockerfile</code> directory.</p>
<h2 id="singularity">Singularity<a class="headerlink" href="#singularity" title="Permanent link">&para;</a></h2>
<p>(Notes on singularity?)</p>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../Usage/" title="Usage" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Usage
              </span>
            </div>
          </a>
        
        
          <a href="../Quickstart/" title="Quick Start" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Quick Start
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright &copy; 2018 <a href="http://ivory.idyll.org/lab/">Lab for Data Intensive Biology</a> at UC Davis
          </div>
        
        powered by
        <a href="http://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
        
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../assets/javascripts/application.0cf9b500.js"></script>
      
      <script>app.initialize({version:"0.17.3",url:{base:".."}})</script>
      
        <script src="../search/require.js"></script>
      
        <script src="../search/search.js"></script>
      
    
    
      
    
  </body>
</html>